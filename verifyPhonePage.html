<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Verify Phone Page</title>
  </head>
  <body>
    <h1>Verify Phone Page (Fake NICE Service)</h1>
    <form name="formPost" method="post">
      <label>Name</label>
      <input id="name" , name="name" /> <br />
      <label>Phone</label>
      <input id="phone" , name="phone" />
      <input type="hidden" id="tokenVersionId" name="tokenVersionId" />
      <input type="hidden" id="EncodeData" name="EncodeData" />
      <br />
      <br />
    </form>
    <button onclick="submit()">Submit</button>
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script language="javascript">
    const urlSearchParams = new URLSearchParams(window.location.search);
    const params = Object.fromEntries(urlSearchParams.entries());
    console.log(params);
    document.getElementById("tokenVersionId").value = params.tokenVersionId;

    function submit() {
      if (document.getElementById("name").value === "FAIL") {
        document.formPost.action =
          "https://dev-api.resellticket.co.kr/api/v1/nice/callback-fail-from-niceapi";
        document.formPost.submit();
      } else {
        document.formPost.action =
          "https://dev-api.resellticket.co.kr/api/v1/nice/callback-success-from-niceapi/" +
          params.tokenVersionId;

        document.getElementById("EncodeData").value =
          document.getElementById("name").value +
          "|" +
          document.getElementById("phone").value;
        document.formPost.submit();
      }
    }
  </script>
</html>
